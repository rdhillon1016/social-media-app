const { body, validationResult, check } = require('express-validator');

const Post = require('../models/Posts');
const PostsValidator = require('./validators/PostsValidator');

// May want to add folder for "QueryExecutors"
// Maybe in a separate "custom-middleware" folder where we keep:
// QueryExecutors
// Validators
// responders
const executeFeedQuery = async (req, res, next) => {};
const executeGetPostQuery = async (req, res, next) => {};
const executeGetCommentsQuery = async (req, res, next) => {};
const executeGetLikesQuery = async (req, res, next) => {};
const executeCreatePostQuery = async (req, res, next) => {};
const executeLikePostQuery = async (req, res, next) => {};
const executeCommentPostQuery = async (req, res, next) => {};
const executeDeletePostQuery = async (req, res, next) => {};

// May want to add folder for "Responders"
const sendFeedResponse = (req, res) => {};
const sendGetPostResponse = (req, res) => {};
const sendGetCommentsResponse = (req, res) => {};
const sendGetLikesResponse = (req, res) => {};
const sendCreatePostResponse = (req, res) => {};
const sendLikePostResponse = (req, res) => {};
const sendCommentPostResponse = (req, res) => {};
const sendDeletePostResponse = (req, res) => {};

exports.getFeed = [
  executeFeedQuery,
  sendFeedResponse,
];

const { validatePostParams } = PostsValidator;
exports.getPost = [
  ...validatePostParams,
  executeGetPostQuery,
  sendGetPostResponse,
];
exports.getComments = [
  ...validatePostParams,
  executeGetCommentsQuery,
  sendGetCommentsResponse,
];
exports.getLikes = [
  ...validatePostParams,
  executeGetLikesQuery,
  sendGetLikesResponse,
];

const { validatePostBody, validateCommentBody } = PostsValidator;
const { validateLikePermitted, validateCommentPermitted, validateDeletePermitted } = PostsValidator;

exports.post = [
  ...validatePostBody,
  executeCreatePostQuery,
  sendCreatePostResponse,
];
exports.likePost = [
  ...validatePostParams,
  validateLikePermitted,
  executeLikePostQuery,
  sendLikePostResponse,
];
exports.commentPost = [
  ...validatePostParams,
  ...validateCommentBody,
  validateCommentPermitted,
  executeCommentPostQuery,
  sendCommentPostResponse,
];

exports.deletePost = [
  ...validatePostParams,
  validateDeletePermitted,
  executeDeletePostQuery,
  sendDeletePostResponse,
];
